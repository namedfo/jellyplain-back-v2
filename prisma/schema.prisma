// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"

  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider             = "postgresql"
  // url                  = "postgresql://postgres:123@localhost:5432/nestjs?schema=public"
  url                  = "postgresql://gen_user:nwg4d99so7@5.23.55.233:5432/default_db"
  referentialIntegrity = "prisma"
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  vkID Int
  role Roles @default(default)

  bdate      String
  first_name String
  last_name  String
  avatar_url String @db.VarChar(1000)

  @@unique([vkID])
}

enum Roles {
  default
  admin
}

model Product {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  category    Categories
  subcategory SubCategory?

  type  Type
  brand Brand

  productChilds ProductChild[]
  reviews       Review[]

  title String
  price Int
}

model ProductChild {
  id Int @id @default(autoincrement())

  images Image[]
  sizes  Sizes[]

  color Colors

  product   Product? @relation(fields: [productId], references: [id])
  productId Int?
}

model Image {
  id Int @id @default(autoincrement())

  url String @db.Text

  productChild   ProductChild? @relation(fields: [productChildId], references: [id])
  productChildId Int?
}

model Review {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  rating  Int
  comment String @db.Char(10000)

  product   Product? @relation(fields: [productId], references: [id])
  productId Int?
}

enum Type {
  original
  replica
}

enum Categories {
  sneakers
  uniform
  clothes
  accessories
  basketballs
}

enum SubCategory {
  everyday
  basketball

  shorts
  jackets
  hoodies
}

enum Brand {
  nike
  adidas
  underarmour
  thenorthface
}

enum Colors {
  black
  blue
  yellow
  white
  colorful
}

enum Sizes {
  eu38
  eu39
  eu40
  eu41
  eu42
  eu43
  eu44
  eu45
  eu46
  eu47
  eu48
  eu49
  eu50
}
